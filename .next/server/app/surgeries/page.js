(()=>{var e={};e.id=107,e.ids=[107],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},5053:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(1334),r(2029),r(5866);var s=r(3191),i=r(8716),a=r(7922),n=r.n(a),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["surgeries",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1334)),"/Users/ylanebouchenino/Desktop/01SHIFT/OR-harmony-next/src/app/surgeries/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/Users/ylanebouchenino/Desktop/01SHIFT/OR-harmony-next/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/ylanebouchenino/Desktop/01SHIFT/OR-harmony-next/src/app/surgeries/page.tsx"],m="/surgeries/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/surgeries/page",pathname:"/surgeries",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3396:(e,t,r)=>{Promise.resolve().then(r.bind(r,6918))},3855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6918:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>C,dynamic:()=>O});var s=r(326),i=r(4226),a=r(4705),n=r(2660),o=r(1664),l=r(8443),d=r(6066),c=r(4794),m=r(1190),u=r(9280),x=r(2015),h=r(3855),g=r(9734),p=r(2881);let y=(0,p.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),f=(0,p.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var j=r(330),_=r(1941);let v=["Cardiac Surgery","Orthopedic Surgery","General Surgery","Neurology","Pediatric Surgery","Emergency Surgery","Robotic Surgery","Laparoscopic Surgery","Endoscopic Surgery","Other"];var N=r(7577);function w({initialValues:e,rooms:t,onSubmit:r,onCancel:i,isSubmitting:a=!1,validationErrors:n={}}){let[l,h]=(0,N.useState)(e),g=(e,t)=>{h(r=>({...r,[e]:t}))};return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(l)},className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"room_id",children:"Operating Room *"}),(0,s.jsxs)(u.Ph,{value:l.room_id,onValueChange:e=>g("room_id",e),children:[s.jsx(u.i4,{className:n.room_id?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select a room"})}),s.jsx(u.Bw,{children:t.map(e=>s.jsx(u.Ql,{value:e.id,children:e.room_number},e.id))})]}),n.room_id&&s.jsx("p",{className:"text-sm text-red-500",children:n.room_id})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"date",children:"Date *"}),s.jsx(m.I,{type:"date",value:l.date,onChange:e=>g("date",e.target.value),min:new Date().toISOString().split("T")[0],className:n.date?"border-red-500":""}),n.date&&s.jsx("p",{className:"text-sm text-red-500",children:n.date})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"time_slot",children:"Time Slot *"}),(0,s.jsxs)(u.Ph,{value:l.time_slot,onValueChange:e=>g("time_slot",e),children:[s.jsx(u.i4,{className:n.time_slot?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select time slot"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"morning",children:"Morning"}),s.jsx(u.Ql,{value:"evening",children:"Evening"})]})]}),n.time_slot&&s.jsx("p",{className:"text-sm text-red-500",children:n.time_slot})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"surgery_type",children:"Surgery Type *"}),(0,s.jsxs)(u.Ph,{value:l.surgery_type,onValueChange:e=>g("surgery_type",e),children:[s.jsx(u.i4,{className:n.surgery_type?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select surgery type"})}),s.jsx(u.Bw,{children:v.map(e=>s.jsx(u.Ql,{value:e,children:e},e))})]}),n.surgery_type&&s.jsx("p",{className:"text-sm text-red-500",children:n.surgery_type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"notes",children:"Notes"}),s.jsx(x.g,{value:l.notes,onChange:e=>g("notes",e.target.value),placeholder:"Additional notes about the surgery...",rows:3})]})]}),(0,s.jsxs)(d.FF,{children:[s.jsx(o.z,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),s.jsx(o.z,{type:"submit",disabled:a,children:a?"Scheduling...":"Schedule Surgery"})]})]})}function b({initialValues:e,doctors:t,rooms:r,onSubmit:i,onCancel:a,isSubmitting:n=!1,validationErrors:l={}}){let[x,h]=(0,N.useState)(e),g=(e,t)=>{h(r=>({...r,[e]:t}))};return(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i(x)},className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"doctor_id",children:"Doctor *"}),(0,s.jsxs)(u.Ph,{value:x.doctor_id,onValueChange:e=>g("doctor_id",e),children:[s.jsx(u.i4,{className:l.doctor_id?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select doctor"})}),s.jsx(u.Bw,{children:t.map(e=>s.jsx(u.Ql,{value:e.id,children:e.name},e.id))})]}),l.doctor_id&&s.jsx("p",{className:"text-sm text-red-500",children:l.doctor_id})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"operating_room_id",children:"Operating Room *"}),(0,s.jsxs)(u.Ph,{value:x.operating_room_id,onValueChange:e=>g("operating_room_id",e),children:[s.jsx(u.i4,{className:l.operating_room_id?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select room"})}),s.jsx(u.Bw,{children:r.map(e=>s.jsx(u.Ql,{value:e.id,children:e.room_number},e.id))})]}),l.operating_room_id&&s.jsx("p",{className:"text-sm text-red-500",children:l.operating_room_id})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"date",children:"Date *"}),s.jsx(m.I,{type:"date",value:x.date,onChange:e=>g("date",e.target.value),min:new Date().toISOString().split("T")[0],className:l.date?"border-red-500":""}),l.date&&s.jsx("p",{className:"text-sm text-red-500",children:l.date})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"shift_type",children:"Shift Type *"}),(0,s.jsxs)(u.Ph,{value:x.shift_type,onValueChange:e=>g("shift_type",e),children:[s.jsx(u.i4,{className:l.shift_type?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select shift"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"morning",children:"Morning"}),s.jsx(u.Ql,{value:"evening",children:"Evening"})]})]}),l.shift_type&&s.jsx("p",{className:"text-sm text-red-500",children:l.shift_type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"role",children:"Role *"}),(0,s.jsxs)(u.Ph,{value:x.role,onValueChange:e=>g("role",e),children:[s.jsx(u.i4,{className:l.role?"border-red-500":"",children:s.jsx(u.ki,{placeholder:"Select role"})}),(0,s.jsxs)(u.Bw,{children:[s.jsx(u.Ql,{value:"Primary",children:"Primary"}),s.jsx(u.Ql,{value:"Secondary",children:"Secondary"})]})]}),l.role&&s.jsx("p",{className:"text-sm text-red-500",children:l.role})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"notes",children:"Notes"}),s.jsx(m.I,{type:"text",value:x.notes||"",onChange:e=>g("notes",e.target.value),placeholder:"Additional notes (optional)"})]})]}),(0,s.jsxs)(d.FF,{children:[s.jsx(o.z,{type:"button",variant:"outline",onClick:a,children:"Cancel"}),s.jsx(o.z,{type:"submit",disabled:n,children:n?"Assigning...":"Assign Doctor"})]})]})}var S=r(4743),k=r(3580),q=r(7287);let O="force-dynamic";function C(){let[e,t]=(0,N.useState)([]),[r,p]=(0,N.useState)([]),[O,C]=(0,N.useState)(!0),[D,F]=(0,N.useState)(!1),[E,P]=(0,N.useState)(null),[T,A]=(0,N.useState)(!1),[R,$]=(0,N.useState)(!1),[z,B]=(0,N.useState)(""),[I,U]=(0,N.useState)({room_id:"",date:"",time_slot:"morning",surgery_type:"",notes:""}),[V,M]=(0,N.useState)({room_id:"",date:"",time_slot:"morning",surgery_type:"",notes:""}),[Q,H]=(0,N.useState)(!1),[Z,L]=(0,N.useState)({}),[G,J]=(0,N.useState)(!1),[W,Y]=(0,N.useState)({doctor_id:"",operating_room_id:"",date:"",shift_type:"morning",role:"Primary",notes:""}),[X,K]=(0,N.useState)([]),[ee,et]=(0,N.useState)(!1),[er,es]=(0,N.useState)({}),[ei,ea]=(0,N.useState)([]),[en,eo]=(0,N.useState)(null),[el,ed]=(0,N.useState)(!1),[ec,em]=(0,N.useState)(!1),[eu,ex]=(0,N.useState)([]),eh=()=>"2024-01-01",eg=async(e,t)=>{let r=await S.Q.getActive(),s=new Set((await q.u.getApprovedForDate(e)).map(e=>e.doctor_id)),i=new Set(ei.filter(r=>r.date===e&&r.shift_type===t).map(e=>e.doctor_id));return r.filter(e=>!s.has(e.id)&&!i.has(e.id)).map(e=>({id:e.id,name:e.name}))},ep=async e=>{C(!0);try{let[r,s,i]=await Promise.all([j.H.getByWeek(e),_.k.getAll(),k.J.getByWeek(e)]);t(r),p(s),ea(i)}catch(e){console.error("Error fetching data:",e)}C(!1)},ey=[],ef=(e,t,r)=>ei.find(s=>s.operating_room_id===e&&s.date===t&&s.shift_type===r);if(O||!z||0===ey.length)return(0,s.jsxs)(n.Hn,{children:[s.jsx(i.S,{variant:"inset"}),(0,s.jsxs)(n.kV,{children:[s.jsx(a.H,{}),s.jsx("div",{className:"flex flex-1 flex-col",children:s.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:s.jsx("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:s.jsx("div",{className:"px-4 lg:px-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading surgeries schedule..."})]})})})})})})]})]});let ej=(t,r,s)=>e.find(e=>e.room_id===t&&e.date===r&&e.time_slot===s),e_=e=>{P(e),A(!0),$(!1)},ev=()=>{E&&(M({room_id:E.room_id,date:E.date,time_slot:E.time_slot||"morning",surgery_type:E.surgery_type||"",notes:E.notes||""}),$(!0))},eN=(e,t)=>{M(r=>({...r,[e]:t}))},ew=async e=>{if(e.preventDefault(),E){H(!0);try{let e=await j.H.update(E.id,{room_id:V.room_id,date:V.date,time_slot:V.time_slot,surgery_type:V.surgery_type,notes:V.notes});t(t=>t.map(t=>t.id===E.id?e:t)),P(e),$(!1)}catch(e){console.error("Error updating surgery:",e),alert(`Error updating surgery: ${e instanceof Error?e.message:"Unknown error"}`)}finally{H(!1)}}},eb=async()=>{if(E&&confirm("Are you sure you want to delete this surgery? This action cannot be undone.")){H(!0);try{await j.H.delete(E.id),t(e=>e.filter(e=>e.id!==E.id)),A(!1),P(null),$(!1)}catch(e){console.error("Error deleting surgery:",e),alert(`Error deleting surgery: ${e instanceof Error?e.message:"Unknown error"}`)}finally{H(!1)}}},eS=e=>{let t=new Date(z);"prev"===e?t.setDate(t.getDate()-7):t.setDate(t.getDate()+7);let r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),a=`${r}-${s}-${i}`;B(a),ep(a)},ek=async(e,t,r)=>{J(!0),Y({doctor_id:"",operating_room_id:e,date:t,shift_type:r,role:"Primary",notes:""}),K(await eg(t,r))};return(0,s.jsxs)(n.Hn,{children:[s.jsx(i.S,{variant:"inset"}),(0,s.jsxs)(n.kV,{children:[s.jsx(a.H,{}),s.jsx("div",{className:"flex flex-1 flex-col",children:s.jsx("div",{className:"@container/main flex flex-1 flex-col gap-2",children:s.jsx("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:(0,s.jsxs)("div",{className:"px-4 lg:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Surgery Schedule"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage operating room schedules and surgery assignments"})]}),s.jsx("div",{className:"flex gap-2",children:(0,s.jsxs)(d.yo,{open:D,onOpenChange:F,children:[s.jsx(d.aM,{asChild:!0,children:(0,s.jsxs)(o.z,{children:[s.jsx(h.Z,{className:"h-4 w-4 mr-2"}),"Schedule Surgery"]})}),(0,s.jsxs)(d.ue,{className:"w-[400px] sm:w-[540px] overflow-y-auto",children:[(0,s.jsxs)(d.Tu,{children:[s.jsx(d.bC,{children:"Schedule New Surgery"}),s.jsx(d.Ei,{children:"Fill in the details to schedule a new surgery."})]}),s.jsx(w,{initialValues:{room_id:I.room_id||"",date:I.date||"",time_slot:I.time_slot||"morning",surgery_type:I.surgery_type||"",notes:I.notes||""},rooms:r,onSubmit:async e=>{H(!0);let r={};if(e.room_id||(r.room_id="Room is required"),e.date||(r.date="Date is required"),e.time_slot||(r.time_slot="Time slot is required"),e.surgery_type||(r.surgery_type="Surgery type is required"),L(r),Object.keys(r).length>0){H(!1);return}try{let r=await j.H.create({room_id:e.room_id,date:e.date,time_slot:e.time_slot,surgery_type:e.surgery_type,notes:e.notes});t(e=>[...e,r]),F(!1),U({room_id:"",date:"",time_slot:"morning",surgery_type:"",notes:""}),L({})}catch(e){alert(`Error creating surgery: ${e instanceof Error?e.message:"Unknown error"}`)}finally{H(!1)}},onCancel:()=>F(!1),isSubmitting:Q,validationErrors:Z})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>eS("prev"),children:"Previous Week"}),s.jsx("span",{className:"text-sm font-medium",children:new Date(z).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>eS("next"),children:"Next Week"})]}),s.jsx(o.z,{variant:"outline",size:"sm",onClick:()=>{B(eh()),ep(eh())},children:"Today"})]}),(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-gray-50 border-b",children:(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"w-32 p-3 font-medium text-sm border-r",children:"Day"}),s.jsx("div",{className:"flex-1 grid gap-px",style:{gridTemplateColumns:`repeat(${r.length}, 1fr)`},children:r.map(e=>s.jsx("div",{className:"p-3 text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(g.Z,{className:"h-4 w-4 text-gray-500"}),s.jsx("span",{className:"text-sm font-medium",children:e.room_number})]})},e.id))})]})}),O?s.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading schedule..."}):s.jsx("div",{className:"divide-y",children:ey.map(e=>(0,s.jsxs)("div",{className:"flex",children:[s.jsx("div",{className:"w-32 p-3 bg-gray-50 border-r",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:`text-sm font-medium ${e.isToday?"text-blue-600":""}`,children:e.dayName}),s.jsx("div",{className:`text-xs ${e.isToday?"text-blue-600":"text-gray-500"}`,children:e.dayNumber})]})}),s.jsx("div",{className:"flex-1 grid gap-px",style:{gridTemplateColumns:`repeat(${r.length}, 1fr)`},children:r.map(t=>(0,s.jsxs)("div",{className:"min-h-[120px] p-2 space-y-1",children:[s.jsx("div",{className:`h-12 rounded border-2 border-dashed cursor-pointer transition-colors ${ej(t.id,e.date,"morning")?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,onClick:()=>{let r=ej(t.id,e.date,"morning");r?e_(r):(U({room_id:t.id,date:e.date,time_slot:"morning",surgery_type:"",notes:""}),F(!0))},children:(()=>{let r=ej(t.id,e.date,"morning");return r?s.jsx("div",{className:"h-full flex items-center justify-center text-xs font-medium text-blue-700",children:r.surgery_type}):null})()}),s.jsx("div",{className:"h-12 rounded border-2 border-dashed cursor-pointer transition-colors bg-white hover:border-gray-300 hover:bg-gray-50",onClick:()=>{let r=ef(t.id,e.date,"morning");r?(eo(r),ed(!0),em(!1)):ek(t.id,e.date,"morning")},children:(()=>{let r=ef(t.id,e.date,"morning");if(r){let e=X.find(e=>e.id===r.doctor_id);return s.jsx("div",{className:"h-full flex items-center justify-center text-xs font-medium text-blue-700",children:e?e.name:"Assigned"})}return null})()})]},t.id))})]},e.date))})]})]})})})})]}),s.jsx(d.yo,{open:T,onOpenChange:A,children:s.jsx(d.ue,{className:"w-[400px] sm:w-[600px] overflow-y-auto",children:E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Tu,{children:[(0,s.jsxs)(d.bC,{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-2xl font-bold text-blue-600",children:s.jsx(y,{className:"h-8 w-8"})}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:E.surgery_type}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Room ",E.operating_rooms?.room_number," • ",new Date(E.date).toLocaleDateString()]})]})]}),s.jsx(d.Ei,{children:R?"Edit surgery details":"Surgery information and details"})]}),R?(0,s.jsxs)("form",{onSubmit:ew,className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"edit_room_id",children:"Operating Room"}),(0,s.jsxs)(u.Ph,{value:V.room_id,onValueChange:e=>eN("room_id",e),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{})}),s.jsx(u.Bw,{children:r.map(e=>s.jsx(u.Ql,{value:e.id,children:e.room_number},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"edit_date",children:"Date"}),s.jsx(m.I,{type:"date",value:V.date,onChange:e=>eN("date",e.target.value),min:new Date().toISOString().split("T")[0]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"edit_surgery_type",children:"Surgery Type"}),(0,s.jsxs)(u.Ph,{value:V.surgery_type,onValueChange:e=>eN("surgery_type",e),children:[s.jsx(u.i4,{children:s.jsx(u.ki,{})}),s.jsx(u.Bw,{children:v.map(e=>s.jsx(u.Ql,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{htmlFor:"edit_notes",children:"Notes"}),s.jsx(x.g,{value:V.notes,onChange:e=>eN("notes",e.target.value),placeholder:"Additional notes about the surgery...",rows:3})]})]}),(0,s.jsxs)(d.FF,{children:[s.jsx(o.z,{type:"button",variant:"outline",onClick:()=>$(!1),children:"Cancel"}),s.jsx(o.z,{type:"submit",disabled:Q,children:Q?"Updating...":"Update Surgery"})]})]}):(0,s.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(y,{className:"h-5 w-5"}),"Surgery Details"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Surgery Type"}),s.jsx("div",{className:"text-lg font-medium",children:E.surgery_type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Room"}),(0,s.jsxs)("div",{className:"text-lg font-medium",children:["#",E.operating_rooms?.room_number]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Date"}),s.jsx("div",{className:"text-lg font-medium",children:new Date(E.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Slot Type"}),(0,s.jsxs)(l.C,{variant:"outline",className:"text-sm",children:[s.jsx(f,{className:"h-3 w-3 mr-1"}),"morning"===E.time_slot?"Morning":"Evening"]})]})]})]}),E.notes&&(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm",children:E.notes})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"System Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Surgery ID"}),s.jsx("div",{className:"text-sm font-mono bg-gray-100 p-2 rounded",children:E.id})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Created"}),s.jsx("div",{className:"text-sm",children:new Date(E.created_date).toLocaleDateString()})]})]})]})]}),s.jsx(d.FF,{children:R?null:(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.sw,{asChild:!0,children:s.jsx(o.z,{variant:"outline",children:"Close"})}),s.jsx(o.z,{type:"button",variant:"outline",onClick:()=>ev(),children:"Edit Surgery"}),s.jsx(o.z,{type:"button",variant:"destructive",onClick:eb,disabled:Q,children:Q?"Deleting...":"Delete Surgery"})]})})]})})}),s.jsx(d.yo,{open:G,onOpenChange:J,children:(0,s.jsxs)(d.ue,{className:"w-[400px] sm:w-[540px] overflow-y-auto",children:[(0,s.jsxs)(d.Tu,{children:[s.jsx(d.bC,{children:"Assign Doctor"}),s.jsx(d.Ei,{children:"Assign a doctor to this room, date, and shift."})]}),s.jsx(b,{initialValues:W,doctors:X,rooms:r,onSubmit:async e=>{et(!0);let t={};if(e.doctor_id||(t.doctor_id="Doctor is required"),e.operating_room_id||(t.operating_room_id="Room is required"),e.date||(t.date="Date is required"),e.shift_type||(t.shift_type="Shift is required"),e.role||(t.role="Role is required"),es(t),Object.keys(t).length>0){et(!1);return}try{let t=await k.J.create(e);ea(e=>[...e,t]),J(!1),Y({doctor_id:"",operating_room_id:"",date:"",shift_type:"morning",role:"Primary",notes:""}),es({})}catch(e){alert(`Error creating assignment: ${e instanceof Error?e.message:"Unknown error"}`)}finally{et(!1)}},onCancel:()=>J(!1),isSubmitting:ee,validationErrors:er})]})}),s.jsx(d.yo,{open:el,onOpenChange:ed,children:(0,s.jsxs)(d.ue,{className:"w-[400px] sm:w-[600px] overflow-y-auto",children:[en&&!ec&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Tu,{children:[(0,s.jsxs)(d.bC,{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-2xl font-bold text-blue-600",children:s.jsx(y,{className:"h-8 w-8"})}),(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:(()=>{let e=X.find(e=>e.id===en.doctor_id);return e?e.name:"Assigned Doctor"})()}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Room ",r.find(e=>e.id===en.operating_room_id)?.room_number," • ",new Date(en.date).toLocaleDateString()]})]})]}),s.jsx(d.Ei,{children:"Assignment information and details"})]}),(0,s.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(f,{className:"h-5 w-5"}),"Assignment Details"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Doctor"}),s.jsx("div",{className:"text-lg font-medium",children:(()=>{let e=X.find(e=>e.id===en.doctor_id);return e?e.name:en.doctor_id})()})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Room"}),s.jsx("div",{className:"text-lg font-medium",children:r.find(e=>e.id===en.operating_room_id)?.room_number})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Date"}),s.jsx("div",{className:"text-lg font-medium",children:new Date(en.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Shift"}),(0,s.jsxs)(l.C,{variant:"outline",className:"text-sm",children:[s.jsx(f,{className:"h-3 w-3 mr-1"}),"morning"===en.shift_type?"Morning":"Evening"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(c._,{className:"text-sm font-medium text-muted-foreground",children:"Role"}),s.jsx("div",{className:"text-lg font-medium",children:en.role})]})]})]}),en.notes&&(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Notes"}),s.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:s.jsx("p",{className:"text-sm",children:en.notes})})]})]}),(0,s.jsxs)(d.FF,{children:[s.jsx(d.sw,{asChild:!0,children:s.jsx(o.z,{variant:"outline",children:"Close"})}),s.jsx(o.z,{type:"button",variant:"outline",onClick:()=>em(!0),children:"Edit Assignment"}),s.jsx(o.z,{type:"button",variant:"destructive",onClick:async()=>{if(confirm("Are you sure you want to delete this assignment? This action cannot be undone.")){H(!0);try{await k.J.delete(en.id),ea(e=>e.filter(e=>e.id!==en.id)),ed(!1),eo(null),em(!1)}catch(e){alert(`Error deleting assignment: ${e instanceof Error?e.message:"Unknown error"}`)}finally{H(!1)}}},children:"Delete Assignment"})]})]}),en&&ec&&s.jsx(b,{initialValues:en,doctors:eu,rooms:r,onSubmit:async e=>{H(!0);try{let t=await k.J.update(en.id,e);ea(e=>e.map(e=>e.id===t.id?t:e)),em(!1),ed(!1),eo(null)}catch(e){alert(`Error updating assignment: ${e instanceof Error?e.message:"Unknown error"}`)}finally{H(!1)}},onCancel:()=>em(!1),isSubmitting:Q})]})})]})}},8443:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(326);r(7577);var i=r(9360),a=r(1223);let n=(0,i.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return s.jsx("div",{className:(0,a.cn)(n({variant:t}),e),...r})}},4794:(e,t,r)=>{"use strict";r.d(t,{_:()=>d});var s=r(326),i=r(7577),a=r(4478),n=r(9360),o=r(1223);let l=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...t},r)=>s.jsx(a.f,{ref:r,className:(0,o.cn)(l(),e),...t}));d.displayName=a.f.displayName},9280:(e,t,r)=>{"use strict";r.d(t,{Bw:()=>g,Ph:()=>c,Ql:()=>p,i4:()=>u,ki:()=>m});var s=r(326),i=r(7577),a=r(4875),n=r(8393),o=r(6633),l=r(2933),d=r(1223);let c=a.fC;a.ZA;let m=a.B4,u=i.forwardRef(({className:e,children:t,...r},i)=>(0,s.jsxs)(a.xz,{ref:i,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(a.JO,{asChild:!0,children:s.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));u.displayName=a.xz.displayName;let x=i.forwardRef(({className:e,...t},r)=>s.jsx(a.u_,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(o.Z,{className:"h-4 w-4"})}));x.displayName=a.u_.displayName;let h=i.forwardRef(({className:e,...t},r)=>s.jsx(a.$G,{ref:r,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=a.$G.displayName;let g=i.forwardRef(({className:e,children:t,position:r="popper",...i},n)=>s.jsx(a.h_,{children:(0,s.jsxs)(a.VY,{ref:n,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[s.jsx(x,{}),s.jsx(a.l_,{className:(0,d.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(h,{})]})}));g.displayName=a.VY.displayName,i.forwardRef(({className:e,...t},r)=>s.jsx(a.__,{ref:r,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=a.__.displayName;let p=i.forwardRef(({className:e,children:t,...r},i)=>(0,s.jsxs)(a.ck,{ref:i,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(a.wU,{children:s.jsx(l.Z,{className:"h-4 w-4"})})}),s.jsx(a.eT,{children:t})]}));p.displayName=a.ck.displayName,i.forwardRef(({className:e,...t},r)=>s.jsx(a.Z0,{ref:r,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=a.Z0.displayName},2015:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var s=r(326),i=r(7577),a=r(1223);let n=i.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));n.displayName="Textarea"},3580:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var s=r(2777);let i={async create(e){let{data:t,error:r}=await s.O.from("assignments").insert([e]).select().single();if(r)throw r;return t},async getByWeek(e){let t=new Date(e);t.setDate(t.getDate()+6);let{data:r,error:i}=await s.O.from("assignments").select("*").gte("date",e).lte("date",t.toISOString().split("T")[0]);if(i)throw i;return r||[]},async update(e,t){let{data:r,error:i}=await s.O.from("assignments").update(t).eq("id",e).select().single();if(i)throw i;return r},async delete(e){let{error:t}=await s.O.from("assignments").delete().eq("id",e);if(t)throw t}}},4743:(e,t,r)=>{"use strict";r.d(t,{Q:()=>i});var s=r(2777);let i={async getAll(){let{data:e,error:t}=await s.O.from("doctors").select("*").order("name");if(t)throw t;return e},async getActive(){let{data:e,error:t}=await s.O.from("doctors").select("*").eq("is_active",!0).order("name");if(t)throw t;return e},async getById(e){let{data:t,error:r}=await s.O.from("doctors").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.O.from("doctors").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:i}=await s.O.from("doctors").update(t).eq("id",e).select().single();if(i)throw i;return r},async softDelete(e){let{data:t,error:r}=await s.O.from("doctors").update({is_active:!1}).eq("id",e).select().single();if(r)throw r;return t},async delete(e){let{error:t}=await s.O.from("doctors").delete().eq("id",e);if(t)throw t;return{success:!0}},async getBySpecialty(e){let{data:t,error:r}=await s.O.from("doctors").select("*").eq("specialty",e).eq("is_active",!0).order("name");if(r)throw r;return t},async search(e){let{data:t,error:r}=await s.O.from("doctors").select("*").or(`name.ilike.%${e}%,employee_id.ilike.%${e}%,specialty.ilike.%${e}%`).eq("is_active",!0).order("name");if(r)throw r;return t}}},1941:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var s=r(2777);let i={async getAll(){console.log("Fetching operating rooms from Supabase...");let{data:e,error:t}=await s.O.from("operating_rooms").select("*").order("room_number");if(t)throw console.error("Error fetching operating rooms:",t),t;return console.log("Operating rooms fetched successfully:",e),e},async getActive(){let{data:e,error:t}=await s.O.from("operating_rooms").select("*").eq("is_active",!0).order("room_number");if(t)throw t;return e},async getById(e){let{data:t,error:r}=await s.O.from("operating_rooms").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.O.from("operating_rooms").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:i}=await s.O.from("operating_rooms").update(t).eq("id",e).select().single();if(i)throw i;return r},async softDelete(e){let{data:t,error:r}=await s.O.from("operating_rooms").update({is_active:!1}).eq("id",e).select().single();if(r)throw r;return t},async delete(e){let{error:t}=await s.O.from("operating_rooms").delete().eq("id",e);if(t)throw t;return{success:!0}},async getBySpecialty(e){let{data:t,error:r}=await s.O.from("operating_rooms").select("*").eq("specialty",e).eq("is_active",!0).order("room_number");if(r)throw r;return t},async search(e){let{data:t,error:r}=await s.O.from("operating_rooms").select("*").or(`room_number.ilike.%${e}%,location.ilike.%${e}%,specialty.ilike.%${e}%`).eq("is_active",!0).order("room_number");if(r)throw r;return t}}},330:(e,t,r)=>{"use strict";r.d(t,{H:()=>i});var s=r(2777);let i={async getAll(){let{data:e,error:t}=await s.O.from("surgeries").select(`
        *,
        operating_rooms!inner(room_number)
      `).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(t)throw t;return e||[]},async getByDateRange(e,t){let{data:r,error:i}=await s.O.from("surgeries").select(`
        *,
        operating_rooms!inner(room_number)
      `).gte("date",e).lte("date",t).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(i)throw i;return r||[]},async getByRoom(e){let{data:t,error:r}=await s.O.from("surgeries").select(`
        *,
        operating_rooms!inner(room_number)
      `).eq("room_id",e).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(r)throw r;return t||[]},async getById(e){let{data:t,error:r}=await s.O.from("surgeries").select(`
        *,
        operating_rooms!inner(room_number)
      `).eq("id",e).single();if(r)throw r;return t},async checkConflict(e){let{data:t,error:r}=await s.O.from("surgeries").select("id").eq("room_id",e.room_id).eq("date",e.date).eq("time_slot",e.time_slot).maybeSingle();if(r&&"PGRST116"!==r.code)throw r;return t?{room_id:e.room_id,date:e.date,slot_type:"surgery_type",existing_surgery_id:t.id}:null},async create(e){if(await this.checkConflict(e))throw Error(`This time slot is already booked for this room on ${e.date}`);let{data:t,error:r}=await s.O.from("surgeries").insert([e]).select(`
        *,
        operating_rooms!inner(room_number)
      `).single();if(r)throw r;return t},async update(e,t){if(t.room_id||t.date||t.time_slot){let r=await this.getById(e);if(!r)throw Error("Surgery not found");let s={room_id:t.room_id||r.room_id,date:t.date||r.date,time_slot:t.time_slot||r.time_slot,surgery_type:r.surgery_type},i=await this.checkConflict(s);if(i&&i.existing_surgery_id!==e)throw Error(`This time slot is already booked for this room on ${s.date}`)}let{data:r,error:i}=await s.O.from("surgeries").update(t).eq("id",e).select(`
        *,
        operating_rooms!inner(room_number)
      `).single();if(i)throw i;return r},async delete(e){let{error:t}=await s.O.from("surgeries").delete().eq("id",e);if(t)throw t},async getByWeek(e){let t=new Date(e);t.setDate(t.getDate()+6);let{data:r,error:i}=await s.O.from("surgeries").select(`
        *,
        operating_rooms!inner(room_number)
      `).gte("date",e).lte("date",t.toISOString().split("T")[0]).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(i)throw i;return r||[]},async getAvailableSlots(e,t){let{data:r,error:i}=await s.O.from("surgeries").select("time_slot").eq("room_id",e).eq("date",t);if(i)throw i;let a=r?.map(e=>e.time_slot)||[];return["morning","evening"].filter(e=>!a.includes(e))}}},7287:(e,t,r)=>{"use strict";r.d(t,{u:()=>i});var s=r(2777);let i={async create(e){let{data:t,error:r}=await s.O.from("time_off_requests").insert([{...e,status:"pending"}]).select().single();if(r)throw r;return t},async getAll(){let{data:e,error:t}=await s.O.from("time_off_requests").select("*, doctors(name)").order("request_start_date",{ascending:!1});if(t)throw t;return e||[]},async updateStatus(e,t){let{data:r,error:i}=await s.O.from("time_off_requests").update({status:t}).eq("id",e).select().single();if(i)throw i;return r},async getApprovedForDate(e){let{data:t,error:r}=await s.O.from("time_off_requests").select("*").eq("status","approved").lte("request_start_date",e).gte("request_end_date",e);if(r)throw r;return t||[]},async getApprovedForRange(e,t){let{data:r,error:i}=await s.O.from("time_off_requests").select("*").eq("status","approved").or(`and(request_start_date.lte.${t},request_end_date.gte.${e})`);if(i)throw i;return r||[]}}},1334:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a,dynamic:()=>i});var s=r(8570);let i=(0,s.createProxy)(String.raw`/Users/ylanebouchenino/Desktop/01SHIFT/OR-harmony-next/src/app/surgeries/page.tsx#dynamic`),a=(0,s.createProxy)(String.raw`/Users/ylanebouchenino/Desktop/01SHIFT/OR-harmony-next/src/app/surgeries/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[975,420,404,821,389,605],()=>r(5053));module.exports=s})();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[107],{763:function(e,t,r){Promise.resolve().then(r.bind(r,7048))},7048:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k},dynamic:function(){return S}});var s=r(7437),a=r(5654),i=r(5670),n=r(5754),l=r(2381),o=r(9174),d=r(1032),c=r(5060),m=r(279),u=r(5291),g=r(3675),x=r(9397),h=r(8420),p=r(9205);let f=(0,p.Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),y=(0,p.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var j=r(5526);let v={async getAll(){let{data:e,error:t}=await j.O.from("surgeries").select("\n        *,\n        operating_rooms!inner(room_number)\n      ").order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(t)throw t;return e||[]},async getByDateRange(e,t){let{data:r,error:s}=await j.O.from("surgeries").select("\n        *,\n        operating_rooms!inner(room_number)\n      ").gte("date",e).lte("date",t).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(s)throw s;return r||[]},async getByRoom(e){let{data:t,error:r}=await j.O.from("surgeries").select("\n        *,\n        operating_rooms!inner(room_number)\n      ").eq("room_id",e).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(r)throw r;return t||[]},async getById(e){let{data:t,error:r}=await j.O.from("surgeries").select("\n        *,\n        operating_rooms!inner(room_number)\n      ").eq("id",e).single();if(r)throw r;return t},async checkConflict(e){let{data:t,error:r}=await j.O.from("surgeries").select("id").eq("room_id",e.room_id).eq("date",e.date).eq("time_slot",e.time_slot).single();if(r&&"PGRST116"!==r.code)throw r;return t?{room_id:e.room_id,date:e.date,time_slot:e.time_slot,existing_surgery_id:t.id}:null},async create(e){if(await this.checkConflict(e))throw Error("This time slot is already booked for this room on ".concat(e.date));let{data:t,error:r}=await j.O.from("surgeries").insert(e).select("\n        *,\n        operating_rooms!inner(room_number)\n      ").single();if(r)throw r;return t},async update(e,t){if(t.room_id||t.date||t.time_slot){let r=await this.getById(e);if(!r)throw Error("Surgery not found");let s={room_id:t.room_id||r.room_id,date:t.date||r.date,time_slot:t.time_slot||r.time_slot,surgery_type:r.surgery_type},a=await this.checkConflict(s);if(a&&a.existing_surgery_id!==e)throw Error("This time slot is already booked for this room on ".concat(s.date))}let{data:r,error:s}=await j.O.from("surgeries").update(t).eq("id",e).select("\n        *,\n        operating_rooms!inner(room_number)\n      ").single();if(s)throw s;return r},async delete(e){let{error:t}=await j.O.from("surgeries").delete().eq("id",e);if(t)throw t},async getByWeek(e){let t=new Date(e);t.setDate(t.getDate()+6);let{data:r,error:s}=await j.O.from("surgeries").select("\n        *,\n        operating_rooms!inner(room_number)\n      ").gte("date",e).lte("date",t.toISOString().split("T")[0]).order("date",{ascending:!0}).order("time_slot",{ascending:!0});if(s)throw s;return r||[]},async getAvailableSlots(e,t){let{data:r,error:s}=await j.O.from("surgeries").select("time_slot").eq("room_id",e).eq("date",t);if(s)throw s;let a=(null==r?void 0:r.map(e=>e.time_slot))||[];return["morning","evening"].filter(e=>!a.includes(e))}};var _=r(3741);let b=["Cardiac Surgery","Orthopedic Surgery","General Surgery","Neurology","Pediatric Surgery","Emergency Surgery","Robotic Surgery","Laparoscopic Surgery","Endoscopic Surgery","Other"],N=[{value:"morning",label:"Morning (8AM-12PM)"},{value:"evening",label:"Evening (2PM-6PM)"}];var w=r(2265);let S="force-dynamic";function k(){var e,t;let[r,p]=(0,w.useState)([]),[j,S]=(0,w.useState)([]),[k,D]=(0,w.useState)(!0),[C,O]=(0,w.useState)(!1),[E,I]=(0,w.useState)(null),[z,F]=(0,w.useState)(!1),[M,q]=(0,w.useState)(!1),[T,R]=(0,w.useState)(""),[P,B]=(0,w.useState)({room_id:"",date:"",time_slot:"morning",surgery_type:"",notes:""}),[Z,A]=(0,w.useState)({room_id:"",date:"",time_slot:"morning",surgery_type:"",notes:""}),[V,U]=(0,w.useState)(!1),[J,Y]=(0,w.useState)({}),L=()=>{let e=new Date,t=new Date(e),r=e.getDay(),s=e.getDate()-r+(0===r?-6:1);t.setDate(s);let a=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(i,"-").concat(n)};(0,w.useEffect)(()=>{let e=L();R(e),Q(e)},[]);let Q=async e=>{D(!0);try{let[t,r]=await Promise.all([v.getByWeek(e),_.k.getAll()]);p(t),S(r)}catch(e){console.error("Error fetching data:",e)}D(!1)},G=(e=>{let t=[],r=new Date(e);for(let e=0;e<7;e++){let s=new Date(r);s.setDate(r.getDate()+e);let a=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),n=String(s.getDate()).padStart(2,"0"),l="".concat(a,"-").concat(i,"-").concat(n);t.push({date:l,dayName:s.toLocaleDateString("en-US",{weekday:"short"}),dayNumber:s.getDate(),isToday:s.toDateString()===new Date().toDateString()})}return t})(T);if(k||!T||0===G.length)return(0,s.jsxs)(n.SidebarProvider,{children:[(0,s.jsx)(a.AppSidebar,{variant:"inset"}),(0,s.jsxs)(n.SidebarInset,{children:[(0,s.jsx)(i.H,{}),(0,s.jsx)("div",{className:"flex flex-1 flex-col",children:(0,s.jsx)("div",{className:"@container/main flex flex-1 flex-col gap-2",children:(0,s.jsx)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:(0,s.jsx)("div",{className:"px-4 lg:px-6",children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading surgeries schedule..."})]})})})})})})]})]});let H=(e,t,s)=>r.find(r=>r.room_id===e&&r.date===t&&r.time_slot===s),W=(e,t)=>{B(r=>({...r,[e]:t})),J[e]&&Y(t=>{let r={...t};return delete r[e],r})},X=async e=>{e.preventDefault(),U(!0);try{let e={};if(P.room_id||(e.room_id="Room is required"),P.date||(e.date="Date is required"),P.surgery_type||(e.surgery_type="Surgery type is required"),Object.keys(e).length>0){Y(e),U(!1);return}let t=await v.create({room_id:P.room_id,date:P.date,time_slot:P.time_slot,surgery_type:P.surgery_type,notes:P.notes});p(e=>[...e,t]),O(!1),B({room_id:"",date:"",time_slot:"morning",surgery_type:"",notes:""}),Y({})}catch(e){console.error("Error creating surgery:",e),alert("Error creating surgery: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{U(!1)}},$=e=>{I(e),F(!0),q(!1)},K=()=>{E&&(A({room_id:E.room_id,date:E.date,time_slot:E.time_slot,surgery_type:E.surgery_type,notes:E.notes||""}),q(!0))},ee=(e,t)=>{A(r=>({...r,[e]:t}))},et=async e=>{if(e.preventDefault(),E){U(!0);try{let e=await v.update(E.id,{room_id:Z.room_id,date:Z.date,time_slot:Z.time_slot,surgery_type:Z.surgery_type,notes:Z.notes});p(t=>t.map(t=>t.id===E.id?e:t)),I(e),q(!1)}catch(e){console.error("Error updating surgery:",e),alert("Error updating surgery: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{U(!1)}}},er=async()=>{if(E&&confirm("Are you sure you want to delete this surgery? This action cannot be undone.")){U(!0);try{await v.delete(E.id),p(e=>e.filter(e=>e.id!==E.id)),F(!1),I(null),q(!1)}catch(e){console.error("Error deleting surgery:",e),alert("Error deleting surgery: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{U(!1)}}},es=e=>{let t=new Date(T);"prev"===e?t.setDate(t.getDate()-7):t.setDate(t.getDate()+7);let r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),i="".concat(r,"-").concat(s,"-").concat(a);R(i),Q(i)};return(0,s.jsxs)(n.SidebarProvider,{children:[(0,s.jsx)(a.AppSidebar,{variant:"inset"}),(0,s.jsxs)(n.SidebarInset,{children:[(0,s.jsx)(i.H,{}),(0,s.jsx)("div",{className:"flex flex-1 flex-col",children:(0,s.jsx)("div",{className:"@container/main flex flex-1 flex-col gap-2",children:(0,s.jsx)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:(0,s.jsxs)("div",{className:"px-4 lg:px-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Surgery Schedule"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage operating room schedules and surgery assignments"})]}),(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsxs)(d.yo,{open:C,onOpenChange:O,children:[(0,s.jsx)(d.aM,{asChild:!0,children:(0,s.jsxs)(l.z,{children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Schedule Surgery"]})}),(0,s.jsxs)(d.ue,{className:"w-[400px] sm:w-[540px] overflow-y-auto",children:[(0,s.jsxs)(d.Tu,{children:[(0,s.jsx)(d.bC,{children:"Schedule New Surgery"}),(0,s.jsx)(d.Ei,{children:"Fill in the details to schedule a new surgery."})]}),(0,s.jsxs)("form",{onSubmit:X,className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"room_id",children:"Operating Room *"}),(0,s.jsxs)(u.Ph,{value:P.room_id,onValueChange:e=>W("room_id",e),children:[(0,s.jsx)(u.i4,{className:J.room_id?"border-red-500":"",children:(0,s.jsx)(u.ki,{placeholder:"Select a room"})}),(0,s.jsx)(u.Bw,{children:j.map(e=>(0,s.jsx)(u.Ql,{value:e.id,children:e.room_number},e.id))})]}),J.room_id&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:J.room_id})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"date",children:"Date *"}),(0,s.jsx)(m.I,{type:"date",value:P.date,onChange:e=>W("date",e.target.value),min:new Date().toISOString().split("T")[0],className:J.date?"border-red-500":""}),J.date&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:J.date})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"time_slot",children:"Time Slot *"}),(0,s.jsxs)(u.Ph,{value:P.time_slot,onValueChange:e=>W("time_slot",e),children:[(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{})}),(0,s.jsx)(u.Bw,{children:N.map(e=>(0,s.jsx)(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"surgery_type",children:"Surgery Type *"}),(0,s.jsxs)(u.Ph,{value:P.surgery_type,onValueChange:e=>W("surgery_type",e),children:[(0,s.jsx)(u.i4,{className:J.surgery_type?"border-red-500":"",children:(0,s.jsx)(u.ki,{placeholder:"Select surgery type"})}),(0,s.jsx)(u.Bw,{children:b.map(e=>(0,s.jsx)(u.Ql,{value:e,children:e},e))})]}),J.surgery_type&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:J.surgery_type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"notes",children:"Notes"}),(0,s.jsx)(g.g,{value:P.notes,onChange:e=>W("notes",e.target.value),placeholder:"Additional notes about the surgery...",rows:3})]})]}),(0,s.jsxs)(d.FF,{children:[(0,s.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>O(!1),children:"Cancel"}),(0,s.jsx)(l.z,{type:"submit",disabled:V||Object.keys(J).length>0,children:V?"Scheduling...":"Schedule Surgery"})]})]})]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>es("prev"),children:"Previous Week"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:new Date(T).toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,s.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>es("next"),children:"Next Week"})]}),(0,s.jsx)(l.z,{variant:"outline",size:"sm",onClick:()=>{R(L()),Q(L())},children:"Today"})]}),(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-50 border-b",children:(0,s.jsxs)("div",{className:"grid grid-cols-8 gap-px",children:[(0,s.jsx)("div",{className:"p-3 font-medium text-sm",children:"Room"}),G.map(e=>(0,s.jsxs)("div",{className:"p-3 text-center",children:[(0,s.jsx)("div",{className:"text-sm font-medium ".concat(e.isToday?"text-blue-600":""),children:e.dayName}),(0,s.jsx)("div",{className:"text-xs ".concat(e.isToday?"text-blue-600":"text-gray-500"),children:e.dayNumber})]},e.date))]})}),k?(0,s.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading schedule..."}):(0,s.jsx)("div",{className:"divide-y",children:j.map(e=>(0,s.jsxs)("div",{className:"grid grid-cols-8 gap-px",children:[(0,s.jsx)("div",{className:"p-3 bg-gray-50 border-r",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"h-4 w-4 text-gray-500"}),(0,s.jsx)("span",{className:"font-medium",children:e.room_number})]})}),G.map(t=>(0,s.jsxs)("div",{className:"min-h-[120px] p-2 space-y-1",children:[(0,s.jsx)("div",{className:"h-12 rounded border-2 border-dashed cursor-pointer transition-colors ".concat(H(e.id,t.date,"morning")?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>{let r=H(e.id,t.date,"morning");r?$(r):(B(r=>({...r,room_id:e.id,date:t.date,time_slot:"morning"})),O(!0))},children:H(e.id,t.date,"morning")&&(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-xs font-medium text-blue-700",children:"Morning"})}),(0,s.jsx)("div",{className:"h-12 rounded border-2 border-dashed cursor-pointer transition-colors ".concat(H(e.id,t.date,"evening")?"border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:()=>{let r=H(e.id,t.date,"evening");r?$(r):(B(r=>({...r,room_id:e.id,date:t.date,time_slot:"evening"})),O(!0))},children:H(e.id,t.date,"evening")&&(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-xs font-medium text-blue-700",children:"Evening"})})]},t.date))]},e.id))})]})]})})})})]}),(0,s.jsx)(d.yo,{open:z,onOpenChange:F,children:(0,s.jsx)(d.ue,{className:"w-[400px] sm:w-[600px] overflow-y-auto",children:E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.Tu,{children:[(0,s.jsxs)(d.bC,{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-blue-100 text-2xl font-bold text-blue-600",children:(0,s.jsx)(f,{className:"h-8 w-8"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold",children:E.surgery_type}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Room ",null===(e=E.operating_rooms)||void 0===e?void 0:e.room_number," â€¢ ",new Date(E.date).toLocaleDateString()]})]})]}),(0,s.jsx)(d.Ei,{children:M?"Edit surgery details":"Surgery information and details"})]}),M?(0,s.jsxs)("form",{onSubmit:et,className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"edit_room_id",children:"Operating Room"}),(0,s.jsxs)(u.Ph,{value:Z.room_id,onValueChange:e=>ee("room_id",e),children:[(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{})}),(0,s.jsx)(u.Bw,{children:j.map(e=>(0,s.jsx)(u.Ql,{value:e.id,children:e.room_number},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"edit_date",children:"Date"}),(0,s.jsx)(m.I,{type:"date",value:Z.date,onChange:e=>ee("date",e.target.value),min:new Date().toISOString().split("T")[0]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"edit_time_slot",children:"Time Slot"}),(0,s.jsxs)(u.Ph,{value:Z.time_slot,onValueChange:e=>ee("time_slot",e),children:[(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{})}),(0,s.jsx)(u.Bw,{children:N.map(e=>(0,s.jsx)(u.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"edit_surgery_type",children:"Surgery Type"}),(0,s.jsxs)(u.Ph,{value:Z.surgery_type,onValueChange:e=>ee("surgery_type",e),children:[(0,s.jsx)(u.i4,{children:(0,s.jsx)(u.ki,{})}),(0,s.jsx)(u.Bw,{children:b.map(e=>(0,s.jsx)(u.Ql,{value:e,children:e},e))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"edit_notes",children:"Notes"}),(0,s.jsx)(g.g,{value:Z.notes,onChange:e=>ee("notes",e.target.value),placeholder:"Additional notes about the surgery...",rows:3})]})]}),(0,s.jsxs)(d.FF,{children:[(0,s.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>q(!1),children:"Cancel"}),(0,s.jsx)(l.z,{type:"submit",disabled:V,children:V?"Updating...":"Update Surgery"})]})]}):(0,s.jsxs)("div",{className:"space-y-6 mt-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,s.jsx)(f,{className:"h-5 w-5"}),"Surgery Details"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{className:"text-sm font-medium text-muted-foreground",children:"Surgery Type"}),(0,s.jsx)("div",{className:"text-lg font-medium",children:E.surgery_type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{className:"text-sm font-medium text-muted-foreground",children:"Room"}),(0,s.jsxs)("div",{className:"text-lg font-medium",children:["#",null===(t=E.operating_rooms)||void 0===t?void 0:t.room_number]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{className:"text-sm font-medium text-muted-foreground",children:"Date"}),(0,s.jsx)("div",{className:"text-lg font-medium",children:new Date(E.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{className:"text-sm font-medium text-muted-foreground",children:"Time Slot"}),(0,s.jsxs)(o.C,{variant:"outline",className:"text-sm",children:[(0,s.jsx)(y,{className:"h-3 w-3 mr-1"}),"morning"===E.time_slot?"Morning (8AM-12PM)":"Evening (2PM-6PM)"]})]})]})]}),E.notes&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Notes"}),(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm",children:E.notes})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"System Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{className:"text-sm font-medium text-muted-foreground",children:"Surgery ID"}),(0,s.jsx)("div",{className:"text-sm font-mono bg-gray-100 p-2 rounded",children:E.id})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{className:"text-sm font-medium text-muted-foreground",children:"Created"}),(0,s.jsx)("div",{className:"text-sm",children:new Date(E.created_date).toLocaleDateString()})]})]})]})]}),(0,s.jsx)(d.FF,{children:M?null:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.sw,{asChild:!0,children:(0,s.jsx)(l.z,{variant:"outline",children:"Close"})}),(0,s.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>K(),children:"Edit Surgery"}),(0,s.jsx)(l.z,{type:"button",variant:"destructive",onClick:er,disabled:V,children:V?"Deleting...":"Delete Surgery"})]})})]})})})]})}},5670:function(e,t,r){"use strict";r.d(t,{H:function(){return n}});var s=r(7437),a=r(1593),i=r(5754);function n(){return(0,s.jsx)("header",{className:"group-has-data-[collapsible=icon]/sidebar-wrapper:h-12 flex h-12 shrink-0 items-center gap-2 border-b transition-[width,height] ease-linear",children:(0,s.jsxs)("div",{className:"flex w-full items-center gap-1 px-4 lg:gap-2 lg:px-6",children:[(0,s.jsx)(i.SidebarTrigger,{className:"-ml-1"}),(0,s.jsx)(a.Separator,{orientation:"vertical",className:"mx-2 data-[orientation=vertical]:h-4"}),(0,s.jsx)("h1",{className:"text-base font-medium",children:"Documents"})]})})}},9174:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var s=r(7437);r(2265);var a=r(535),i=r(3448);let n=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)(n({variant:r}),t),...a})}},5060:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var s=r(7437),a=r(2265),i=r(6394),n=r(535),l=r(3448);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.f,{ref:t,className:(0,l.cn)(o(),r),...a})});d.displayName=i.f.displayName},5291:function(e,t,r){"use strict";r.d(t,{Bw:function(){return h},Ph:function(){return c},Ql:function(){return p},i4:function(){return u},ki:function(){return m}});var s=r(7437),a=r(2265),i=r(3402),n=r(875),l=r(2135),o=r(401),d=r(3448);let c=i.fC;i.ZA;let m=i.B4,u=a.forwardRef((e,t)=>{let{className:r,children:a,...l}=e;return(0,s.jsxs)(i.xz,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...l,children:[a,(0,s.jsx)(i.JO,{asChild:!0,children:(0,s.jsx)(n.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.xz.displayName;let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})});g.displayName=i.u_.displayName;let x=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",r),...a,children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})});x.displayName=i.$G.displayName;let h=a.forwardRef((e,t)=>{let{className:r,children:a,position:n="popper",...l}=e;return(0,s.jsx)(i.h_,{children:(0,s.jsxs)(i.VY,{ref:t,className:(0,d.cn)("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:n,...l,children:[(0,s.jsx)(g,{}),(0,s.jsx)(i.l_,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,s.jsx)(x,{})]})})});h.displayName=i.VY.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...a})}).displayName=i.__.displayName;let p=a.forwardRef((e,t)=>{let{className:r,children:a,...n}=e;return(0,s.jsxs)(i.ck,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...n,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(i.wU,{children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(i.eT,{children:a})]})});p.displayName=i.ck.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",r),...a})}).displayName=i.Z0.displayName},3675:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var s=r(7437),a=r(2265),i=r(3448);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});n.displayName="Textarea"},3741:function(e,t,r){"use strict";r.d(t,{k:function(){return a}});var s=r(5526);let a={async getAll(){console.log("Fetching operating rooms from Supabase...");let{data:e,error:t}=await s.O.from("operating_rooms").select("*").order("room_number");if(t)throw console.error("Error fetching operating rooms:",t),t;return console.log("Operating rooms fetched successfully:",e),e},async getActive(){let{data:e,error:t}=await s.O.from("operating_rooms").select("*").eq("is_active",!0).order("room_number");if(t)throw t;return e},async getById(e){let{data:t,error:r}=await s.O.from("operating_rooms").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.O.from("operating_rooms").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.O.from("operating_rooms").update(t).eq("id",e).select().single();if(a)throw a;return r},async softDelete(e){let{data:t,error:r}=await s.O.from("operating_rooms").update({is_active:!1}).eq("id",e).select().single();if(r)throw r;return t},async delete(e){let{error:t}=await s.O.from("operating_rooms").delete().eq("id",e);if(t)throw t;return{success:!0}},async getBySpecialty(e){let{data:t,error:r}=await s.O.from("operating_rooms").select("*").eq("specialty",e).eq("is_active",!0).order("room_number");if(r)throw r;return t},async search(e){let{data:t,error:r}=await s.O.from("operating_rooms").select("*").or("room_number.ilike.%".concat(e,"%,location.ilike.%").concat(e,"%,specialty.ilike.%").concat(e,"%")).eq("is_active",!0).order("room_number");if(r)throw r;return t}}},5526:function(e,t,r){"use strict";r.d(t,{O:function(){return n}});var s=r(6580);let a="https://ysvdvvnkvfttfqlpunex.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlzdmR2dm5rdmZ0dGZxbHB1bmV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2NjExMDgsImV4cCI6MjA2NzIzNzEwOH0.brNSYSkHNcJjiUJYCA_skW29__dDpq5qhfu51aYE13s";if(!a||!i)throw Error("Missing Supabase environment variables");let n=(0,s.eI)(a,i)}},function(e){e.O(0,[972,716,109,654,971,117,744],function(){return e(e.s=763)}),_N_E=e.O()}]);
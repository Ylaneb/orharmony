(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108],{1185:function(e,t,r){Promise.resolve().then(r.bind(r,3498))},3498:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(7437),n=r(2265),s=r(5654),o=r(5670),l=r(5754),i=r(9820),d=r(3448);let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,d.cn)("w-full caption-bottom text-sm",r),...n})})});c.displayName="Table";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("thead",{ref:t,className:(0,d.cn)("[&_tr]:border-b",r),...n})});u.displayName="TableHeader";let f=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,d.cn)("[&_tr:last-child]:border-0",r),...n})});f.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("tr",{ref:t,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});p.displayName="TableRow";let x=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("th",{ref:t,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...n})});x.displayName="TableHead";let h=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("td",{ref:t,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...n})});h.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("caption",{ref:t,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption";var m=r(4542),v=r(2255),j=r(2749),g=r(2381);function w(){let[e,t]=(0,n.useState)([]),[r,w]=(0,n.useState)(!0),[y,N]=(0,n.useState)(null),b=async(e,r)=>{N(e);try{await m.u.updateStatus(e,r),t(t=>t.map(t=>t.id===e?{...t,status:r}:t))}catch(e){}finally{N(null)}};return(0,n.useEffect)(()=>{(async function(){w(!0);try{let e=await m.u.getAll();t(e)}catch(e){t([])}finally{w(!1)}})()},[]),(0,a.jsxs)(l.Hn,{children:[(0,a.jsx)(s.S,{variant:"inset"}),(0,a.jsxs)(l.kV,{children:[(0,a.jsx)(o.H,{}),(0,a.jsx)("div",{className:"flex flex-1 flex-col",children:(0,a.jsx)("div",{className:"@container/main flex flex-1 flex-col gap-2",children:(0,a.jsx)("div",{className:"flex flex-col gap-4 py-4 md:gap-6 md:py-6",children:(0,a.jsx)("div",{className:"px-4 lg:px-6",children:(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Time Off Requests"})}),(0,a.jsx)(i.aY,{children:r?(0,a.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading requests..."}):(0,a.jsxs)(c,{children:[(0,a.jsx)(u,{children:(0,a.jsxs)(p,{children:[(0,a.jsx)(x,{children:"Doctor"}),(0,a.jsx)(x,{children:"Start Date"}),(0,a.jsx)(x,{children:"End Date"}),(0,a.jsx)(x,{children:"Type"}),(0,a.jsx)(x,{children:"Status"}),(0,a.jsx)(x,{children:"Notes"})]})}),(0,a.jsx)(f,{children:e.map(e=>{var t;return(0,a.jsxs)(p,{children:[(0,a.jsx)(h,{children:(null===(t=e.doctors)||void 0===t?void 0:t.name)||e.doctor_id}),(0,a.jsx)(h,{children:(0,v.WU)(new Date(e.request_start_date),"PPP")}),(0,a.jsx)(h,{children:(0,v.WU)(new Date(e.request_end_date),"PPP")}),(0,a.jsx)(h,{children:e.type.replace("_"," ")}),(0,a.jsx)(h,{children:(0,a.jsxs)(j.J2,{children:[(0,a.jsx)(j.xo,{asChild:!0,children:(0,a.jsx)(g.z,{variant:"approved"===e.status?"default":"rejected"===e.status?"destructive":"outline",size:"sm",className:(0,d.cn)("w-full justify-start",y===e.id&&"opacity-50 pointer-events-none"),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,a.jsx)(j.yk,{align:"start",className:"w-40 p-2",children:(0,a.jsx)("div",{className:"flex flex-col gap-1",children:["pending","approved","rejected"].map(t=>(0,a.jsx)(g.z,{variant:"approved"===t?"default":"rejected"===t?"destructive":"outline",size:"sm",className:"w-full justify-start",disabled:y===e.id||e.status===t,onClick:()=>b(e.id,t),children:t.charAt(0).toUpperCase()+t.slice(1)},t))})})]})}),(0,a.jsx)(h,{children:e.notes})]},e.id)})})]})})]})})})})})]})]})}},9820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return o},aY:function(){return c},eW:function(){return u},ll:function(){return i}});var a=r(7437),n=r(2265),s=r(3448);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});o.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},2749:function(e,t,r){"use strict";r.d(t,{J2:function(){return l},xo:function(){return i},yk:function(){return d}});var a=r(7437),n=r(2265),s=r(7312),o=r(3448);let l=s.fC,i=s.xz,d=n.forwardRef((e,t)=>{let{className:r,align:n="center",sideOffset:l=4,...i}=e;return(0,a.jsx)(s.h_,{children:(0,a.jsx)(s.VY,{ref:t,align:n,sideOffset:l,className:(0,o.cn)("z-50 w-auto rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none animate-in fade-in-0 data-[state=open]:fade-in-100",r),...i})})});d.displayName=s.VY.displayName},4542:function(e,t,r){"use strict";r.d(t,{u:function(){return n}});var a=r(5526);let n={async create(e){let{data:t,error:r}=await a.O.from("time_off_requests").insert([{...e,status:"pending"}]).select().single();if(r)throw r;return t},async getAll(){let{data:e,error:t}=await a.O.from("time_off_requests").select("*, doctors(name)").order("request_start_date",{ascending:!1});if(t)throw t;return e||[]},async updateStatus(e,t){let{data:r,error:n}=await a.O.from("time_off_requests").update({status:t}).eq("id",e).select().single();if(n)throw n;return r},async getApprovedForDate(e){let{data:t,error:r}=await a.O.from("time_off_requests").select("*").eq("status","approved").lte("request_start_date",e).gte("request_end_date",e);if(r)throw r;return t||[]},async getApprovedForRange(e,t){let{data:r,error:n}=await a.O.from("time_off_requests").select("*").eq("status","approved").or("and(request_start_date.lte.".concat(t,",request_end_date.gte.").concat(e,")"));if(n)throw n;return r||[]}}},7312:function(e,t,r){"use strict";r.d(t,{VY:function(){return U},fC:function(){return Z},h_:function(){return I},xz:function(){return H}});var a=r(2265),n=r(6741),s=r(8575),o=r(3966),l=r(5278),i=r(6097),d=r(9103),c=r(9255),u=r(6008),f=r(3832),p=r(1599),x=r(6840),h=r(7495),m=r(886),v=r(5478),j=r(9157),g=r(7437),w="Popover",[y,N]=(0,o.b)(w,[u.D7]),b=(0,u.D7)(),[_,C]=y(w),R=e=>{let{__scopePopover:t,children:r,open:n,defaultOpen:s,onOpenChange:o,modal:l=!1}=e,i=b(t),d=a.useRef(null),[f,p]=a.useState(!1),[x,h]=(0,m.T)({prop:n,defaultProp:null!=s&&s,onChange:o,caller:w});return(0,g.jsx)(u.fC,{...i,children:(0,g.jsx)(_,{scope:t,contentId:(0,c.M)(),triggerRef:d,open:x,onOpenChange:h,onOpenToggle:a.useCallback(()=>h(e=>!e),[h]),hasCustomAnchor:f,onCustomAnchorAdd:a.useCallback(()=>p(!0),[]),onCustomAnchorRemove:a.useCallback(()=>p(!1),[]),modal:l,children:r})})};R.displayName=w;var P="PopoverAnchor";a.forwardRef((e,t)=>{let{__scopePopover:r,...n}=e,s=C(P,r),o=b(r),{onCustomAnchorAdd:l,onCustomAnchorRemove:i}=s;return a.useEffect(()=>(l(),()=>i()),[l,i]),(0,g.jsx)(u.ee,{...o,...n,ref:t})}).displayName=P;var O="PopoverTrigger",k=a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,o=C(O,r),l=b(r),i=(0,s.e)(t,o.triggerRef),d=(0,g.jsx)(x.WV.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Y(o.open),...a,ref:i,onClick:(0,n.M)(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?d:(0,g.jsx)(u.ee,{asChild:!0,...l,children:d})});k.displayName=O;var D="PopoverPortal",[A,q]=y(D,{forceMount:void 0}),F=e=>{let{__scopePopover:t,forceMount:r,children:a,container:n}=e,s=C(D,t);return(0,g.jsx)(A,{scope:t,forceMount:r,children:(0,g.jsx)(p.z,{present:r||s.open,children:(0,g.jsx)(f.h,{asChild:!0,container:n,children:a})})})};F.displayName=D;var T="PopoverContent",E=a.forwardRef((e,t)=>{let r=q(T,e.__scopePopover),{forceMount:a=r.forceMount,...n}=e,s=C(T,e.__scopePopover);return(0,g.jsx)(p.z,{present:a||s.open,children:s.modal?(0,g.jsx)(M,{...n,ref:t}):(0,g.jsx)(z,{...n,ref:t})})});E.displayName=T;var S=(0,h.Z8)("PopoverContent.RemoveScroll"),M=a.forwardRef((e,t)=>{let r=C(T,e.__scopePopover),o=a.useRef(null),l=(0,s.e)(t,o),i=a.useRef(!1);return a.useEffect(()=>{let e=o.current;if(e)return(0,v.Ry)(e)},[]),(0,g.jsx)(j.Z,{as:S,allowPinchZoom:!0,children:(0,g.jsx)(V,{...e,ref:l,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,n.M)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),i.current||null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:(0,n.M)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,a=2===t.button||r;i.current=a},{checkForDefaultPrevented:!1}),onFocusOutside:(0,n.M)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),z=a.forwardRef((e,t)=>{let r=C(T,e.__scopePopover),n=a.useRef(!1),s=a.useRef(!1);return(0,g.jsx)(V,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,o;null===(a=e.onCloseAutoFocus)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current||null===(o=r.triggerRef.current)||void 0===o||o.focus(),t.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:t=>{var a,o;null===(a=e.onInteractOutside)||void 0===a||a.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(s.current=!0));let l=t.target;(null===(o=r.triggerRef.current)||void 0===o?void 0:o.contains(l))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&s.current&&t.preventDefault()}})}),V=a.forwardRef((e,t)=>{let{__scopePopover:r,trapFocus:a,onOpenAutoFocus:n,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:p,onInteractOutside:x,...h}=e,m=C(T,r),v=b(r);return(0,i.EW)(),(0,g.jsx)(d.M,{asChild:!0,loop:!0,trapped:a,onMountAutoFocus:n,onUnmountAutoFocus:s,children:(0,g.jsx)(l.XB,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:x,onEscapeKeyDown:c,onPointerDownOutside:f,onFocusOutside:p,onDismiss:()=>m.onOpenChange(!1),children:(0,g.jsx)(u.VY,{"data-state":Y(m.open),role:"dialog",id:m.contentId,...v,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),W="PopoverClose";function Y(e){return e?"open":"closed"}a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,s=C(W,r);return(0,g.jsx)(x.WV.button,{type:"button",...a,ref:t,onClick:(0,n.M)(e.onClick,()=>s.onOpenChange(!1))})}).displayName=W,a.forwardRef((e,t)=>{let{__scopePopover:r,...a}=e,n=b(r);return(0,g.jsx)(u.Eh,{...n,...a,ref:t})}).displayName="PopoverArrow";var Z=R,H=k,I=F,U=E}},function(e){e.O(0,[757,972,334,255,878,971,117,744],function(){return e(e.s=1185)}),_N_E=e.O()}]);